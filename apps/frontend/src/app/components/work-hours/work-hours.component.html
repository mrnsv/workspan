<!-- Compact Work Hours Display -->
<div class="compact-work-hours">
  
  <!-- Main Content (Always Visible) -->
  <div class="work-hours-content">
    
    <!-- Primary Stats Card -->
    <div class="cp-card primary-stats-compact" [ngClass]="getCyberpunkStatusClass()">
      <div class="stats-header-compact">
        <div class="status-indicator-compact" [ngClass]="getStatusIndicatorClass()">
          <mat-icon class="status-icon-small">{{ getStatusIcon() }}</mat-icon>
        </div>
        <div class="hours-display-compact">
          <span class="hours-value-compact">{{ getActiveHoursDisplay() }}</span>
          <span class="hours-label-compact">ACTIVE HOURS</span>
        </div>
        <div class="status-message-compact">{{ getCyberpunkStatusMessage() }}</div>
      </div>
      
      <div class="progress-compact">
        <mat-progress-bar 
          mode="determinate" 
          [value]="getCompletionPercentage()"
          class="progress-bar-compact">
        </mat-progress-bar>
        <span class="progress-text-compact">{{ getCompletionPercentageText() }}</span>
      </div>
    </div>

    <!-- Stats Grid Compact -->
    <div class="stats-grid-compact">
      <!-- 1. Required Hours (REQ) -->
      <div class="stat-card-compact">
        <mat-icon class="stat-icon-compact">schedule</mat-icon>
        <div class="stat-data-compact">
          <span class="stat-label-compact">REQ</span>
          <span class="stat-value-compact">{{ getRequiredHoursDisplay() }}</span>
        </div>
      </div>

      <!-- 2. Shortfall Hours (DEF) or Excess Hours (SUR) -->
      <div class="stat-card-compact" [ngClass]="getDefSurClass()">
        <mat-icon class="stat-icon-compact">{{ getDefSurIcon() }}</mat-icon>
        <div class="stat-data-compact">
          <span class="stat-label-compact">{{ getDefSurLabel() }}</span>
          <span class="stat-value-compact">{{ getDefSurValue() }}</span>
        </div>
      </div>

      <!-- 3. When To Exit (WTE) -->
      <div class="stat-card-compact info">
        <mat-icon class="stat-icon-compact">schedule</mat-icon>
        <div class="stat-data-compact">
          <span class="stat-label-compact">WTE</span>
          <span class="stat-value-compact">{{ getWteDisplay() }}</span>
        </div>
      </div>

      <!-- 4. Working Status (STS) -->
      <div class="stat-card-compact" [ngClass]="getWorkingStatusClass()">
        <mat-icon class="stat-icon-compact">{{ getWorkingStatusIcon() }}</mat-icon>
        <div class="stat-data-compact">
          <span class="stat-label-compact">STS</span>
          <span class="stat-value-compact">{{ getWorkingStatusValue() }}</span>
        </div>
      </div>
    </div>

    <!-- Error State -->
    <div class="cp-card error-compact" *ngIf="(error$ | async) && !(loading$ | async)">
      <div class="error-header-compact">
        <mat-icon class="error-icon-compact">error_outline</mat-icon>
        <span class="error-title-compact">SYSTEM ERROR</span>
      </div>
      <div class="error-message-compact">
        {{ error$ | async }}
      </div>
      <div class="error-actions-compact">
        <button mat-raised-button class="retry-btn-compact" (click)="onRefresh()">
          <mat-icon>refresh</mat-icon>
          RETRY
        </button>
        <button mat-button class="dismiss-btn-compact" (click)="clearErrors()">
          <mat-icon>close</mat-icon>
          DISMISS
        </button>
      </div>
    </div>

    <!-- No Data State (when no error but no data) -->
    <div class="cp-card no-data-compact" *ngIf="!workHoursData && !(loading$ | async) && !(error$ | async)">
      <div class="no-data-header-compact">
        <mat-icon class="no-data-icon-compact">schedule</mat-icon>
        <span class="no-data-title-compact">NO DATA</span>
      </div>
      <div class="no-data-message-compact">
        No work hours data available for the selected date.
      </div>
      <button mat-raised-button class="retry-btn-compact" (click)="onRefresh()">
        <mat-icon>refresh</mat-icon>
        LOAD DATA
      </button>
    </div>


  </div>
</div>